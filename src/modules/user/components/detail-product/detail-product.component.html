<div class="container product-detail mt-3 mb-3">
  <div class="row">
    <!-- Hình ảnh sản phẩm -->
    <div class="col-md-6">
      <div id="productCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <div *ngIf="selectedProductDetail; else noProductImage" class="carousel-item active">
            <img class="img-product-table" [src]="selectedProductDetail.anh || 'noimage.png'" alt="Product Image">
          </div>
          <ng-template #noProductImage>
            <div class="carousel-item active">
              <img src="http://localhost:8080/images/does-not-exist.png" alt="Out of Stock" class="img-fluid">
            </div>
          </ng-template>
        </div>
      </div>
    </div>

    <!-- Thông tin sản phẩm -->
    <div class="col-md-6">
      <h2 class="product-title">{{ sanPhamById.tenSanPham }} [{{selectedProductDetail?.mauSac?.tenMau}} -
        {{selectedProductDetail?.kichCo?.giaTri}}]</h2>
        <p>Số lượng còn trong kho: {{ selectedProductDetail?.soLuong }}</p>
      <p class="product-price" *ngIf="selectedProductDetail; else noPrice">
      </p>
      <ng-template #noPrice>
        <p class="product-price text-danger">Sản phẩm không tồn tại</p>
      </ng-template>

      <!-- Màu sắc -->
      <div class="mt-3">
        <strong>Màu sắc: </strong>
        <div class="btn-group">
          <button *ngFor="let ms of uniqueColors" type="button" class="btn btn-outline-secondary color-btn"
            [ngClass]="{'selected': ms.idMauSac === selectedColor.idMauSac}" (click)="selectColor(ms)">
            {{ ms.tenMau }}
          </button>
        </div>
      </div>

      <!-- Kích cỡ -->
      <div class="mt-3">
        <strong>Kích cỡ: </strong>
        <div class="btn-group">
          <button *ngFor="let kc of uniqueSizes" type="button" class="btn btn-outline-secondary size-btn"
            [ngClass]="{'selected': kc.idKichCo === selectedSize.idKichCo}" (click)="selectSize(kc)">
            {{ kc.giaTri }}
          </button>
        </div>
      </div>

      <!-- Nút thao tác -->
      <div class="d-flex justify-content-start align-items-center gap-3 mt-3">
        <button class="btn btn-primary btn-buy-now" *ngIf="selectedProductDetail"
          (click)="buyNow(selectedProductDetail.idSpct)">
          <i class="fa-solid fa-dollar-sign"></i>
          Mua ngay với giá {{ selectedProductDetail.gia | currency: 'VND' }}
        </button>
        <button (click)="handlecart(selectedProductDetail)" class="btn btn-outline-secondary btn-add-to-cart">
          <i class="fa-solid fa-cart-plus"></i>
          Thêm vào
          giỏ hàng</button>
      </div>

      <!-- Thông tin chi tiết -->
      <div class="product-details mt-4">
        <h5>Thông tin chi tiết</h5>
        <table class="table modern-table">
          <thead>
            <tr>
              <th>Thuộc tính</th>
              <th>Tên</th>
              <th>Mô tả</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Chất liệu</td>
              <td>{{sanPhamById.chatLieu.tenChatLieu || 'Đang cập nhật'}}</td>
              <td>{{sanPhamById.chatLieu.moTa || 'Không có mô tả'}}</td>
            </tr>
            <tr>
              <td>Trọng lượng</td>
              <td>{{sanPhamById.trongLuong.giaTri || 'N/A'}}</td>
              <td>{{sanPhamById.trongLuong.moTa || 'Không có mô tả'}}</td>
            </tr>
            <tr>
              <td>Danh mục</td>
              <td>{{sanPhamById.danhMuc.tenDanhMuc || 'Đang cập nhật'}}</td>
              <td>{{sanPhamById.danhMuc.moTa || 'Không có mô tả'}}</td>
            </tr>
            <tr>
              <td>Thương hiệu</td>
              <td>{{sanPhamById.thuongHieu.tenThuongHieu || 'Đang cập nhật'}}</td>
              <td>{{sanPhamById.thuongHieu.moTa || 'Không có mô tả'}}</td>
            </tr>
          </tbody>
        </table>
        
      </div>
    </div>
  </div>
</div>